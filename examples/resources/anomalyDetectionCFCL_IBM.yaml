---
name: "anomalyDetection"
dataIns:
- name: "InVal"
  type: "string"
  source: "some source"
workflowBody:
- function:
    name: "cleanData"
    type: "cleanDataType"
    dataIns:
    - name: "InVal"
      type: "string"
      source: "anomalyDetection/InVal"
    dataOuts:
    - name: "OutVal"
      type: "string"
    - name: "OutVal2"
      type: "number"
    properties:
    - name: "resource"
      value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1CleanData.json"
- switch:
    name: "selectSensor"
    dataIns:
    - name: "InVal"
      type: "string"
      source: "cleanData/OutVal"
    dataEval:
      name: "value"
      type: "number"
      source: "cleanData/OutVal2"
    cases:
    - value: "73641"
      functions:
      - function:
          name: "driveIntensity"
          type: "driveIntensityType"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "selectSensor/InVal"
          dataOuts:
          - name: "OutVal"
            type: "number"
          properties:
          - name: "resource"
            value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1DriveIntensity.json"
    - value: "73642"
      functions:
      - function:
          name: "spindleVibration"
          type: "spindleVibrationType"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "selectSensor/InVal"
          dataOuts:
          - name: "OutVal"
            type: "number"
          properties:
          - name: "resource"
            value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1SpindleVibration.json"
    - value: "73643"
      functions:
      - function:
          name: "temperature"
          type: "temperatureType"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "selectSensor/InVal"
          dataOuts:
          - name: "OutVal"
            type: "number"
          properties:
          - name: "resource"
            value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1Temperature.json"
    dataOuts:
    - name: "OutVal"
      type: "collection"
      source: "driveIntensity/OutVal,spindleVibration/OutVal,temperature/OutVal,NULL"
- function:
    name: "normalizeData"
    type: "normalizeDataType"
    dataIns:
    - name: "InVal"
      type: "collection"
      source: "selectSensor/OutVal"
    dataOuts:
    - name: "OutVal"
      type: "string"
    - name: "OutVal2"
      type: "string"
    properties:
    - name: "resource"
      value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1NormalizeData.json"
- switch:
    name: "selectReport"
    dataIns:
    - name: "InVal"
      type: "string"
      source: "normalizeData/OutVal"
    dataEval:
      name: "value"
      type: "string"
      source: "normalizeData/OutVal2"
    cases:
    - value: "critical"
      functions:
      - function:
          name: "renderCriticalReport"
          type: "renderCriticalReportType"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "selectReport/InVal"
          dataOuts:
          - name: "OutVal"
            type: "string"
          properties:
          - name: "resource"
            value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1RenderCriticalReport.json"
      - parallel:
          name: "parallelCriticalReport"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "renderCriticalReport/OutVal"
          parallelBody:
          - section:
            - function:
                name: "alertCustomer"
                type: "alertCustomerType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelCriticalReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1AlertCustomer.json"
          - section:
            - function:
                name: "alertMachineExpert"
                type: "alertMachineExpertType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelCriticalReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1AlertMachineExpert.json"
          - section:
            - function:
                name: "alertAdmin"
                type: "alertAdminType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelCriticalReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1AlertAdmin.json"
          - section:
            - function:
                name: "logAtEdge"
                type: "logAtEdgeType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelCriticalReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1LogAtEdge.json"
    - value: "severe"
      functions:
      - function:
          name: "renderSevereReport"
          type: "renderSevereReportType"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "selectReport/InVal"
          dataOuts:
          - name: "OutVal"
            type: "string"
          properties:
          - name: "resource"
            value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1RenderSevereReport.json"
      - parallel:
          name: "parallelSevereReport"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "renderSevereReport/OutVal"
          parallelBody:
          - section:
            - function:
                name: "alertMachineExpert2"
                type: "alertMachineExpertType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelSevereReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1AlertMachineExpert.json"
          - section:
            - function:
                name: "alertAdmin2"
                type: "alertAdminType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelSevereReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1AlertAdmin.json"
          - section:
            - function:
                name: "logAtFog"
                type: "flogAtFogType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelSevereReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1LogAtFog.json"
    - value: "light"
      functions:
      - function:
          name: "renderLightReport"
          type: "f7Type"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "selectReport/InVal"
          dataOuts:
          - name: "OutVal"
            type: "string"
          properties:
          - name: "resource"
            value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1RenderLightReport.json"
      - parallel:
          name: "parallelLightReport"
          dataIns:
          - name: "InVal"
            type: "string"
            source: "renderLightReport/OutVal"
          parallelBody:
          - section:
            - function:
                name: "alertAdmin3"
                type: "alertAdminType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelLightReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1AlertAdmin.json"
          - section:
            - function:
                name: "logAtFog3"
                type: "logAtFogType"
                dataIns:
                - name: "InVal"
                  type: "string"
                  source: "parallelLightReport/InVal"
                properties:
                - name: "resource"
                  value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1LogAtFog.json"
    default:
    - function:
        name: "dummy"
        type: "dummy"
        dataIns:
        - name: "InVal"
          type: "string"
          source: "selectReport/InVal"
        dataOuts:
        - name: "OutVal"
          type: "string"
    dataOuts:
    - name: "OutVal"
      type: "string"
      source: "normalizeData/OutVal2"
- function:
    name: "logCentral"
    type: "logCentralType"
    dataIns:
    - name: "InVal"
      type: "string"
      source: "selectReport/OutVal"
    properties:
    - name: "resource"
      value: "python:https://eu-gb.functions.cloud.ibm.com/api/v1/web/sashko%40dps.uibk.ac.at_dev/default/f1LogCentral.json"
